<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>animbook • animbook</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="animbook">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">animbook</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/animbook.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/KrisanatA/animbook/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>animbook</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/KrisanatA/animbook/blob/HEAD/vignettes/animbook.Rmd" class="external-link"><code>vignettes/animbook.Rmd</code></a></small>
      <div class="d-none name"><code>animbook.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/KrisanatA/animbook" class="external-link">animbook</a></span><span class="op">)</span></span></code></pre></div>
<p>The inspiration for this package comes from the NY Times animated
plot. The challenge of reproducing the animation is the amount of code
required. This package tries to solve that by reducing it to only three
steps. This package also adds a new element of proportional shaded
area.</p>
<div class="section level3">
<h3 id="first-stage-prepare-the-data">First stage: Prepare the data<a class="anchor" aria-label="anchor" href="#first-stage-prepare-the-data"></a>
</h3>
<p>In this stage, we first need to transform the data into the
categorized format. This function will calculate the scaling based on
the argument the user provided.</p>
<p>The data needs to contain the following variable for the function to
work:</p>
<ul>
<li>data: <code>dbl_change</code>, A data frame that contained the
numerical values.</li>
<li>id: <code>id</code>, needs to be a factor variable.</li>
<li>values: <code>values</code>, needs to be a numeric variable.</li>
<li>time: <code>time</code>, needs to be an integer variable.</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">categorized_dbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span><span class="op">)</span></span></code></pre></div>
<p>There are also additional options that allow the user to
customize.</p>
<ul>
<li>group: the column name that distinguishes between the values
group.</li>
<li>ncat: the number of categories to be created for scaling
values.</li>
<li>breaks: a vector for creating a bins.</li>
<li>label: a vector to provide a label to the qtile.</li>
<li>group_scaling: the column name used for grouping the variable before
scaling.</li>
<li>scaling: the scaling method.</li>
</ul>
<p>The function can calculate four different scales using these
options.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># rank scaling</span></span>
<span><span class="va">rank_scaling</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># absolute scaling</span></span>
<span><span class="va">absolute_scaling</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span>,</span>
<span>                             scaling <span class="op">=</span> <span class="st">"absolute"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># rank scaling by group</span></span>
<span><span class="va">rank_group_scaling</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span>,</span>
<span>                             group_scaling <span class="op">=</span> <span class="va">gp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># absolute scaling by group</span></span>
<span><span class="va">absolute_group_scaling</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span>,</span>
<span>                             group_scaling <span class="op">=</span> <span class="va">gp</span>,</span>
<span>                             scaling <span class="op">=</span> <span class="st">"absolute"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rank_scaling</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 400 × 4</span></span></span>
<span><span class="co">#&gt;    id     time qtile label</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1      <span style="text-decoration: underline;">2</span>020     3 3    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2      <span style="text-decoration: underline;">2</span>020     2 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3      <span style="text-decoration: underline;">2</span>020     4 4    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4      <span style="text-decoration: underline;">2</span>020     3 3    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5      <span style="text-decoration: underline;">2</span>020     2 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6      <span style="text-decoration: underline;">2</span>020     2 2    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7      <span style="text-decoration: underline;">2</span>020     4 4    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8      <span style="text-decoration: underline;">2</span>020     4 4    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9      <span style="text-decoration: underline;">2</span>020     3 3    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10     <span style="text-decoration: underline;">2</span>020     4 4    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 390 more rows</span></span></span></code></pre></div>
<p>This function will return a <code>categorized</code> data.</p>
</div>
<div class="section level3">
<h3 id="second-stage-plotting-the-data">Second stage: Plotting the data<a class="anchor" aria-label="anchor" href="#second-stage-plotting-the-data"></a>
</h3>
<p>After preparing the data, we can now plot it. There are three plots
available in this package:</p>
<ul>
<li>
<code>kangaroo</code>, which plots the observation’s movement over
time.</li>
<li>
<code>wallaby</code>, which subset the plot to either
<code>top</code> or <code>bottom</code> and see which group they are in
after the observational period.</li>
<li>
<code>funnel_web_spider</code>, which is a faceted plot by time
variable.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dbl_categorized</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep.html">anim_prep</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dbl_change</span>, </span>
<span>                             id <span class="op">=</span> <span class="va">id</span>, </span>
<span>                             values <span class="op">=</span> <span class="va">values</span>,</span>
<span>                             time <span class="op">=</span> <span class="va">time</span>,</span>
<span>                             group <span class="op">=</span> <span class="va">gp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># kangaroo plot</span></span>
<span><span class="fu"><a href="../reference/kangaroo_plot.html">kangaroo_plot</a></span><span class="op">(</span><span class="va">dbl_categorized</span><span class="op">)</span></span>
<span><span class="co">#&gt; You can now use the animbook::anim_animate() function to</span></span>
<span><span class="co">#&gt;           transform it into an animated object</span></span></code></pre></div>
<p><img src="animbook_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># wallaby plot</span></span>
<span><span class="fu"><a href="../reference/wallaby_plot.html">wallaby_plot</a></span><span class="op">(</span><span class="va">dbl_categorized</span><span class="op">)</span></span>
<span><span class="co">#&gt; You can now use the animbook::anim_animate() function to</span></span>
<span><span class="co">#&gt;           transform it into an animated object</span></span></code></pre></div>
<p><img src="animbook_files/figure-html/unnamed-chunk-4-2.png" width="700"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>            </span>
<span><span class="co"># funnel web spider plot</span></span>
<span><span class="fu"><a href="../reference/funnel_web_plot.html">funnel_web_plot</a></span><span class="op">(</span><span class="va">dbl_categorized</span><span class="op">)</span></span></code></pre></div>
<p><img src="animbook_files/figure-html/unnamed-chunk-4-3.png" width="700"></p>
<p>The <code>kangaroo</code> and <code>wallaby</code> plots can be
animated using the function of the next stage.
<code>funnel_web_spider</code> only supported static plot. We can also
choose whether we want to animate the plot using gganimate or
plotly.</p>
</div>
<div class="section level3">
<h3 id="third-stage-animating-the-plot">Third stage: Animating the plot<a class="anchor" aria-label="anchor" href="#third-stage-animating-the-plot"></a>
</h3>
<p>To animate the plot, we need to save the plot into an object, which
then can be passed on to the function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">aeles_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_prep_cat.html">anim_prep_cat</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">aeles</span>, id <span class="op">=</span> <span class="va">id</span>, values <span class="op">=</span> <span class="va">party</span>, time <span class="op">=</span> <span class="va">year</span>, group <span class="op">=</span> <span class="va">gender</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/wallaby_plot.html">wallaby_plot</a></span><span class="op">(</span><span class="va">aeles_cat</span><span class="op">)</span></span>
<span><span class="co">#&gt; You can now use the animbook::anim_animate() function to</span></span>
<span><span class="co">#&gt;           transform it into an animated object</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/anim_animate.html">anim_animate</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span></span>
<span><span class="co">#&gt; You can now pass it to gganimate::animate().</span></span>
<span><span class="co">#&gt;                    The recommended setting is nframes = 89</span></span>
<span></span>
<span><span class="fu">gganimate</span><span class="fu">::</span><span class="fu"><a href="https://gganimate.com/reference/animate.html" class="external-link">animate</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p><img src="animbook_files/figure-html/unnamed-chunk-5-1.gif"><!-- --></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Krisanat Anukarnsakulchularp, Dianne Cook.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
